<div class="col-md-4">
    <div class="form-group">
        <label>Sales Order</label>
        @Html.Editor("SalesOrder", "SalesOrder", new { htmlAttributes = new { @class = "form-control", placeholder = "SO", @Id = "SalesOrder", @autocomplete = "off" } })
    </div>
</div>

<div class="col-md-4">
        <div class="form-group">
            <label>&nbsp;</label><br/>
            <button type="button" class="modal-link btn btn-primary" onclick="SelectItem(this, event);">&nbsp;View&nbsp;&nbsp;</button>
            @*@Html.ActionLink("View ", null, null, null, new { @class = "modal-btn btn-primary" , @data_target = ".bd-example-modal-lg" , @onclick = "SelectItem(this, event);" })*@
        </div>
</div>


<script type="text/javascript">
    function SelectItem(ctrl, event) {
            //event.preventDefault();
        var SO = $("#SalesOrder").val();


        if ($("#SalesOrder").val() == "") {
            $("#SalesOrder").focus();
            bootbox.alert('Please select a sales order.');
        }
        else {
            $.ajax({
                url: '@Url.Action("ViewStock", "Issue")',
                type: "POST",
                data: { SalesOrder: SO },
                success: function (result) {
                    $('#modal-container').html(result);

                    //Initialize Data Tables
                    $(".table").DataTable();
                }
            });
        }
    }

</script>


<script type="text/javascript">
    //AutoComplete for SGStyle
    $(function () {
        $("#SalesOrder").typeahead({
            hint: true,
            highlight: true,
            minLength: 3,
            source: function (request, response) {
                $.ajax({
                    url: '@Url.Action("AutoCompleteSO", "Issue")',
                    data: "{ 'prefix': '" + request + "'}",
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        items = [];
                        map = {};
                        $.each(data, function (i, item) {
                            var id = item.value;
                            var name = item.text;
                            map[name] = { id: id, name: name };
                            items.push(name);
                        });
                        response(items);
                        $(".dropdown-menu").css("height", "auto");
                    }
                });
            },
            updater: function (item) {
                return item;
            }
        });
    });
</script>